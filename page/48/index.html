<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
	<meta name="generator" content="Hugo 0.17" />
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width">

  <title>
    
      Baron Schwartz&#39;s Blog &middot; Stay Curious!
    
  </title>

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  
  <meta name="og:title" content="" />
  <meta name="og:type" content="article" />
  <meta name="og:image" content="https://www.xaprb.com/" />
  <meta name="og:description" content="" />
  <meta name="og:url" content="https://www.xaprb.com/" />
  <meta name="og:site_name" content="Baron Schwartz&#39;s Blog" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@xaprb" />

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/index.xml">

  
  <link rel="canonical" href="https://www.xaprb.com/">
  

  <script type="text/javascript" src='//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
</head>


  <body class="layout-reverse sidebar-overlay">

    
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
	  <p>Baron Schwartz&#39;s Blog &middot; Stay Curious!</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>
    <a class="sidebar-nav-item" href="/blog/">Posts</a>
    
        <a class="sidebar-nav-item" href="/about/">About Baron Schwartz</a>
    
        <a class="sidebar-nav-item" href="/essential-books/">Essential Books</a>
    
        <a class="sidebar-nav-item" href="/rx-toolkit/">Regex Toolkit</a>
    
        <a class="sidebar-nav-item" href="/blog/2013/12/18/secure-your-accounts-and-devices/">Staying Secure Online</a>
    
        <a class="sidebar-nav-item" href="/blog/2013/07/10/ultimate-notebook-and-journal-face-off/">The Ultimate Notebook</a>
    
        <a class="sidebar-nav-item" href="/blog/2015/03/07/ultimate-pen-marker-face-off/">The Ultimate Pen</a>
    
  </nav>

  <div class="sidebar-item">
	  <p>&copy; 2016 Baron Schwartz.
	  <br><a href="/index.xml">RSS Feed</a>, <a href="/about/">Contact</a>.<br>
	 <br>Powered by <a href="http://hugo.spf13.com">Hugo</a>,
	  <a href="https://www.netlify.com/">Netlify</a>,
	  <a href="https://forestry.io/">Forestry</a>,
	  <a href="https://github.com/xaprb/xaprb-src/">GitHub</a>,
	  <a href="https://disqus.com">Disqus</a>,
	  <a href="https://swiftype.com/">Swiftype</a>.
	</p>
  </div>
</div>


    
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Baron Schwartz&#39;s Blog</a>
          </h3>
        </div>
      </div>

      <div class="container content">


<div class="posts">
	
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/08/16/how-to-build-role-based-access-control-in-sql/">How to build role-based access control in SQL</a></h1>
        <span class="post-date">Wed, Aug 16, 2006</span>
        The posts I&rsquo;ve been reading and writing recently have reminded me how Object-Relational Mapping (ORM) systems make it fun and convenient to interact with databases. For some of the reasons they&rsquo;re a developer&rsquo;s favorite, they can be a database administrator&rsquo;s nightmare (think surrogate keys). But designing tables with a consistent set of columns has its benefits. Just because the columns are meta-data that have no intrinsic meaning doesn&rsquo;t mean they have no value.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/08/16/how-to-build-role-based-access-control-in-sql/"> &raquo; Continue Reading (about 3900 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/08/15/how-to-reverse-a-sequence-in-sql/">How to reverse a sequence in SQL</a></h1>
        <span class="post-date">Tue, Aug 15, 2006</span>
        I wrote an article a while back about how to order updates in MySQL so you don&rsquo;t violate a unique index. I said I&rsquo;d write another article on how to swap numbers in a sequence with a unique index. This is that article, but I&rsquo;m going to make it a little more generic: how to reverse a (possibly ordered) sequence.
I&rsquo;ve been thinking about this for a while, wondering if there&rsquo;s a way I can do it in-place in one statement (I like to pile challenge upon difficulty).
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/08/15/how-to-reverse-a-sequence-in-sql/"> &raquo; Continue Reading (about 900 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/08/13/four-types-of-database-abstraction-layers/">Four types of database abstraction layers</a></h1>
        <span class="post-date">Sun, Aug 13, 2006</span>
        Quite a few people have chimed in on a recent discussion about PHP, MySQL, database abstraction layers, and performance. I think enough viewpoints have been covered that I don&rsquo;t need to comment, but one question I don&rsquo;t see answered is &ldquo;what are the qualities of a good SQL abstraction layer?&rdquo; I think it&rsquo;s a very interesting &ndash; and complicated &ndash; question. As it turns out, the term has several meanings, and I think it&rsquo;s important to understand them.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/08/13/four-types-of-database-abstraction-layers/"> &raquo; Continue Reading (about 2300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/08/12/how-to-monitor-mysql-status-and-variables-with-innotop/">How to monitor MySQL status and variables with innotop</a></h1>
        <span class="post-date">Sat, Aug 12, 2006</span>
        This is one in a series of articles on how to use innotop, a MySQL and InnoDB monitor. In this article I&rsquo;ll explain how innotop can make it much easier to collect useful information from SHOW STATUS and SHOW VARIABLES into one place. There are three modes in innotop that do this in different ways, so one of them may meet your needs.
 Note: VividCortex is the startup I founded in 2012.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/08/12/how-to-monitor-mysql-status-and-variables-with-innotop/"> &raquo; Continue Reading (about 1500 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/08/10/how-to-use-order-by-and-limit-on-multi-table-updates-in-mysql/">How to use ORDER BY and LIMIT on multi-table updates in MySQL</a></h1>
        <span class="post-date">Thu, Aug 10, 2006</span>
        One of my colleagues recently redesigned a system for scheduling work, and needed to write a multiple-table UPDATE with ORDER BY and LIMIT, neither of which is supported for multiple-table UPDATE in MySQL. This article explains how to do it anyway, and shows how to rewrite a first attempt for hundreds of times better performance.
Introduction Without revealing too much about my employer&rsquo;s internal systems, I want to give a little bit of context.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/08/10/how-to-use-order-by-and-limit-on-multi-table-updates-in-mysql/"> &raquo; Continue Reading (about 800 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/08/10/version-01132-of-innotop-released/">Version 0.1.132 of innotop released</a></h1>
        <span class="post-date">Thu, Aug 10, 2006</span>
        I&rsquo;ve released another version of the innotop MySQL and InnoDB monitor.
It&rsquo;s worth upgrading to this version not only because of the new features, but also because it should handle more special cases without crashing. Of course, if it does crash, I appreciate your help fixing it; see this article about what information I need.
Changes since version 0.1.123 include:
 Fixes to deal with older versions of Perl. Thanks to everyone who helped me find out what was wrong.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/08/10/version-01132-of-innotop-released/"> &raquo; Continue Reading (about 400 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/08/08/how-to-deliberately-cause-a-deadlock-in-mysql/">How to deliberately cause a deadlock in MySQL</a></h1>
        <span class="post-date">Tue, Aug 8, 2006</span>
        Why would you ever want to deliberately cause a deadlock? Sometimes a very large deadlock in MySQL will fill the output of SHOW ENGINE INNODB STATUS until it truncates, so you can&rsquo;t see information about transactions, log and I/O, buffers, and so forth. I know only two solutions to this problem: 1) restart MySQL and 2) cause a small deadlock so the LAST DETECTED DEADLOCK section shrinks to an acceptable size.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/08/08/how-to-deliberately-cause-a-deadlock-in-mysql/"> &raquo; Continue Reading (about 800 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/08/07/how-to-write-multi-table-cross-database-deletes-with-aliases-in-mysql/">How to write multi-table, cross-database deletes with aliases in MySQL</a></h1>
        <span class="post-date">Mon, Aug 7, 2006</span>
        In an earlier article I explored the finer points of multi-table, cross-database deletes in MySQL, but I didn&rsquo;t get it quite right. This article explains the subtleties I&rsquo;ve discovered since then. This is more complex than the MySQL manual documents.
In the earlier article, I wrote
 The solution is not to alias the tables. It&rsquo;s less convenient, but it&rsquo;s the only thing to do sometimes.
 Now I find it is possible to alias the tables, with certain restrictions.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/08/07/how-to-write-multi-table-cross-database-deletes-with-aliases-in-mysql/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/08/05/how-to-give-locking-hints-in-mysql/">How to give locking hints in MySQL</a></h1>
        <span class="post-date">Sat, Aug 5, 2006</span>
        I worked with Microsoft SQL Server 2000 at my previous employer, and was accustomed to explicitly defining the locking mode I wanted, by providing lock hints on queries. MySQL gives less control over locking, but there are ways to control the type of locks a query will acquire. This article explores those techniques.
I&rsquo;ve been trying to learn more about MySQL locks and deadlocks, and have written several articles on the topic recently, so I&rsquo;m keen to hear your feedback.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/08/05/how-to-give-locking-hints-in-mysql/"> &raquo; Continue Reading (about 700 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/08/03/a-little-known-way-to-cause-a-database-deadlock/">A little-known way to cause a database deadlock</a></h1>
        <span class="post-date">Thu, Aug 3, 2006</span>
        A &ldquo;little-known way,&rdquo; I claim, and yet it happens all the time &ndash; precisely because it&rsquo;s little-known. Experts will quickly recognize where I&rsquo;m going to go with this article, but I hope many others in my audience will understand deadlocks more deeply after reading it. I&rsquo;ll use MySQL and InnoDB for illustration purposes, but the scenario this article describes (dramatic music, please!) could happen to you, too! And probably will someday, unless you&rsquo;re one of the elite few (ok, enough drama) who know how to avoid it.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/08/03/a-little-known-way-to-cause-a-database-deadlock/"> &raquo; Continue Reading (about 2200 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/08/02/how-to-monitor-innodb-lock-waits/">How to monitor InnoDB lock waits</a></h1>
        <span class="post-date">Wed, Aug 2, 2006</span>
        This is one in a series of articles on how to use the innotop MySQL and InnoDB monitor. In this article I show how innotop can display locks that are causing a transaction to wait.
 Note: VividCortex is the startup I founded in 2012. It&rsquo;s the easiest way to monitor what your servers are doing in production. VividCortex offers MySQL performance monitoring and PostgreSQL performance management among many other features.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/08/02/how-to-monitor-innodb-lock-waits/"> &raquo; Continue Reading (about 600 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/08/02/what-to-do-when-innotop-crashes/">What to do when innotop crashes</a></h1>
        <span class="post-date">Wed, Aug 2, 2006</span>
        A couple of people have written in reporting innotop crashes. Unfortunately I don&rsquo;t have access to enough variations of operating systems and MySQL versions to test everything myself, but if you&rsquo;re able to help by sending me a bug report when innotop crashes, I&rsquo;m willing to work on fixing it! I hope soon I&rsquo;ll have a much larger test suite, and am grateful for your help with that. This article explains what information I need to reproduce and debug crashes.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/08/02/what-to-do-when-innotop-crashes/"> &raquo; Continue Reading (about 500 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/08/01/innotop-01123-released/">Version 0.1.123 of innotop released</a></h1>
        <span class="post-date">Tue, Aug 1, 2006</span>
        I&rsquo;ve made several improvements to the innotop InnoDB and MySQL monitor, and it&rsquo;s ready to get from the innotop homepage.
As usual, it&rsquo;s a combination of bug fixes, new features, and enhancements to existing features. Changes since version 0.1.112 include
 More detailed lock information displayed in InnoDB Deadlock mode. A new section in Row Operations / Semaphores mode shows information about the wait array. I&rsquo;ve expanded the test suite a lot.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/08/01/innotop-01123-released/"> &raquo; Continue Reading (about 200 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/07/31/how-to-analyze-innodb-mysql-locks/">How to find out who is locking a table  in MySQL</a></h1>
        <span class="post-date">Mon, Jul 31, 2006</span>
        MySQL is adding more tools to monitor its internals with every new release, but one thing it still lacks is a way to find out who is locking what, and therefore which transactions block which other ones. This is such a vital feature that I&rsquo;m considering writing my own patch to the source! Still, it is possible, to a limited extent, to find out who&rsquo;s locking resources. In this article I&rsquo;ll explain how you can do that.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/07/31/how-to-analyze-innodb-mysql-locks/"> &raquo; Continue Reading (about 1800 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/07/28/how-to-install-innotop/">How to install innotop</a></h1>
        <span class="post-date">Fri, Jul 28, 2006</span>
        This is the first in a series of articles I&rsquo;ll write on how to use innotop, the MySQL and InnoDB monitor I&rsquo;m developing. This article explains how to install innotop.
Note: this article is outdated now. Please see the innotop homepage for updated installation instructions and download options.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/07/28/how-to-install-innotop/"> &raquo; Continue Reading (about 100 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/07/27/why-does-innodb-create-two-indexes-per-foreign-key/">Why does InnoDB create two indexes per foreign key?</a></h1>
        <span class="post-date">Thu, Jul 27, 2006</span>
        If you&rsquo;ve ever created foreign keys on an InnoDB table, you&rsquo;ll see it automatically creates indexes, if none exists, on the referenced columns in the parent table, and also in the foreign key columns in the child table. This article explains why both are needed.
Why index the parent table? When a row is inserted or updated in the child table, the parent table must be searched for a row whose referenced values match the values in the foreign key columns.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/07/27/why-does-innodb-create-two-indexes-per-foreign-key/"> &raquo; Continue Reading (about 400 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/07/26/how-to-coordinate-distributed-work-with-mysqls-get_lock/">How to coordinate distributed work with MySQL&#39;s GET_LOCK</a></h1>
        <span class="post-date">Wed, Jul 26, 2006</span>
        This article explains how I replaced file-based methods to ensure only one running instance of a program with MySQL&rsquo;s GET_LOCK function. The result is mutual exclusivity that works in a distributed environment, and it&rsquo;s dead simple to implement.
My current employer used to use a technique similar to the classic Perl &lsquo;Highlander&rsquo; method to ensure only one instance of a certain program would run at any given time. The method was to create a file with a certain name and then get an exclusive, non-blocking lock on the file with the flock() call.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/07/26/how-to-coordinate-distributed-work-with-mysqls-get_lock/"> &raquo; Continue Reading (about 800 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/07/23/how-to-track-what-owns-a-mysql-connection/">How to track what owns a MySQL connection</a></h1>
        <span class="post-date">Sun, Jul 23, 2006</span>
        MySQL doesn&rsquo;t yet provide good tools for some troubleshooting tasks. Fortunately, there is some low-hanging fruit you can pluck. One example is a tool to record who owns a MySQL database connection, so long-running transactions can be traced back to the source. This article demonstrates an easy way to solve that problem.
Introduction One of the reasons I wrote the innotop InnoDB and MySQL monitor was to monitor long-running transactions.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/07/23/how-to-track-what-owns-a-mysql-connection/"> &raquo; Continue Reading (about 500 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/07/23/innotop-version-01106-released/">Version 0.1.106 of innotop MySQL/InnoDB monitor released</a></h1>
        <span class="post-date">Sun, Jul 23, 2006</span>
        I&rsquo;ve just improved innotop substantially, and released version 0.1.106, and I&rsquo;m also preparing a series of articles on how to use it for real, practical things. I&rsquo;d like to know what you think of it, what problems you have, what features you want. It would be a huge help if you&rsquo;d start it, toggle through its modes, and give me your feedback.
Enhancements in version 0.1.106 include:
 InnoDBParser is much more complete and accurate.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/07/23/innotop-version-01106-released/"> &raquo; Continue Reading (about 200 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/07/19/3-ways-to-maintain-rollup-tables-in-sql/">3 ways to maintain rollup tables in SQL</a></h1>
        <span class="post-date">Wed, Jul 19, 2006</span>
        At both my current and previous employer I&rsquo;ve been involved in designing and maintaining aggregate, or &ldquo;rollup&rdquo; tables for advertising traffic data. I have learned several methods of propagating changes from the atomic data through to its aggregations. This article discusses these methods, how to implement them, and their pros and cons.
As an example of data that gets rolled up to aggregate tables, I&rsquo;ll use my current employer&rsquo;s data structures (more or less).
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/07/19/3-ways-to-maintain-rollup-tables-in-sql/"> &raquo; Continue Reading (about 1600 words)</a></p>
      </div>
  
</div>


<div class="pagination">
  
    <a class="pagination-item newer" href="/page/47/">Newer</a>
  
  
    <a class="pagination-item older" href="/page/49/">Older</a>
  
</div>



      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

  _st('install','Dq2t2TnFxXxWs_y9hi1k');
</script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-101883-1', 'auto');
  ga('send', 'pageview');

</script>



  </body>
</html>

