<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width">

  <title>
    
      Databases &middot; Baron Schwartz&#39;s Blog
    
  </title>

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  
  <meta name="og:title" content="Databases" />
  <meta name="og:type" content="article" />
  <meta name="og:image" content="https://www.xaprb.com/" />
  <meta name="og:description" content="" />
  <meta name="og:url" content="https://www.xaprb.com/categories/databases/" />
  <meta name="og:site_name" content="Baron Schwartz&#39;s Blog" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@xaprb" />

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/index.xml">

  
  <link rel="canonical" href="https://www.xaprb.com/categories/databases/">
  

  <script type="text/javascript" src='//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
</head>


  <body class="layout-reverse sidebar-overlay">

    
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
	  <p>Baron Schwartz&#39;s Blog &middot; Stay Curious!</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>
    <a class="sidebar-nav-item" href="/blog/">Posts</a>
    
        <a class="sidebar-nav-item" href="/about/">About Baron Schwartz</a>
    
        <a class="sidebar-nav-item" href="/essential-books/">Essential Books</a>
    
        <a class="sidebar-nav-item" href="/rx-toolkit/">Regex Toolkit</a>
    
        <a class="sidebar-nav-item" href="/blog/2013/12/18/secure-your-accounts-and-devices/">Staying Secure Online</a>
    
        <a class="sidebar-nav-item" href="/blog/2013/07/10/ultimate-notebook-and-journal-face-off/">The Ultimate Notebook</a>
    
        <a class="sidebar-nav-item" href="/blog/2015/03/07/ultimate-pen-marker-face-off/">The Ultimate Pen</a>
    
  </nav>

  <div class="sidebar-item">
	  <p>&copy; 2016 Baron Schwartz.
	  <br><a href="/index.xml">RSS Feed</a>, <a href="/about/">Contact</a>.<br>
	 <br>Powered by <a href="http://hugo.spf13.com">Hugo</a>,
	  <a href="https://www.netlify.com/">Netlify</a>,
	  <a href="https://forestry.io/">Forestry</a>,
	  <a href="https://github.com/xaprb/xaprb-src/">GitHub</a>,
	  <a href="https://disqus.com">Disqus</a>,
	  <a href="https://swiftype.com/">Swiftype</a>.
	</p>
  </div>
</div>


    
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Baron Schwartz&#39;s Blog</a>
          </h3>
        </div>
      </div>

      <div class="container content">


<div class="posts">
	
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/09/06/detecting-mysql-server-problems-automatically/">Detecting MySQL server problems automatically</a></h1>
        <span class="post-date">Thu, Sep 6, 2012</span>
        I previously blogged about work I was doing on automatically finding problems in a MySQL server, with no hardcoded thresholds or predetermined indicators of what is &ldquo;bad behavior.&rdquo; I had to pause my studies on that for a while, due to time constraints. I&rsquo;ve recently been able to resume and I&rsquo;m happy to report that I&rsquo;m making good progress.
One of the things I&rsquo;ve done is a survey of existing literature on this subject.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/09/06/detecting-mysql-server-problems-automatically/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/09/05/whats-your-opinion-of-high-performance-mysql/">What&#39;s your opinion of High Performance MySQL?</a></h1>
        <span class="post-date">Wed, Sep 5, 2012</span>
        The second edition of High Performance MySQL has 27 reviews on Amazon, but the third edition only has 5 so far. By this point I assume many of you have a copy and have read it cover to cover. I&rsquo;d really appreciate your reviews &ndash; when purchasing, people look not only at the star rating but at the number of reviews. You can create a review here. And thanks!
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/09/05/whats-your-opinion-of-high-performance-mysql/"> &raquo; Continue Reading (about 100 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/09/04/staying-out-of-mysqls-danger-zone/">Staying out of MySQL&#39;s danger zone</a></h1>
        <span class="post-date">Tue, Sep 4, 2012</span>
        MySQL is a great database server. It has lots of flaws, but if you work with its strong points and try to minimize its weaknesses, it works fantastically well for a lot of use cases. Unfortunately, if you bang on its weak points, sometimes you get hit by falling bricks.
A couple of its riskiest weak points relate to unavailability of an expected resource, particularly disk space and memory. For example, Stewart Smith has blogged about the interesting results you can get if you intentionally make malloc() fail.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/09/04/staying-out-of-mysqls-danger-zone/"> &raquo; Continue Reading (about 700 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/09/03/what-should-a-dba-do/">What should a DBA do?</a></h1>
        <span class="post-date">Mon, Sep 3, 2012</span>
        I was thinking recently about what a DBA does, and decided to blog about what I think a DBA could/should do. Most DBAs I know are mired in day-to-day firefighting and time-consuming tedium. This forces them to operate in reactive mode (because they don&rsquo;t have enough time to &ldquo;get caught up&rdquo;), and keeps them from more valuable things they could be doing. Here&rsquo;s my short and incomplete list:
 Working with the developers (programmers) to help architect upcoming projects.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/09/03/what-should-a-dba-do/"> &raquo; Continue Reading (about 500 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/08/31/dealing-with-deadlocks-in-a-busy-mysql-server/">Dealing with deadlocks in a busy MySQL server</a></h1>
        <span class="post-date">Fri, Aug 31, 2012</span>
        The servers I help manage have a lot of deadlocks, especially around a few central tables that are important to many business functions. The queries against them are complex, and they crunch a lot of data in some cases. As a result, we have long-running transactions that often deadlock against others, and there are even many short-running jobs that touch only a single row at a time that can&rsquo;t get their work done sometimes.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/08/31/dealing-with-deadlocks-in-a-busy-mysql-server/"> &raquo; Continue Reading (about 600 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/08/28/debugging-metadata-locking-in-mysql-5-5/">Debugging metadata locking in MySQL 5.5</a></h1>
        <span class="post-date">Tue, Aug 28, 2012</span>
        MySQL 5.1 added a long-needed feature: INFORMATION_SCHEMA tables for inspecting locks held and waited-for inside of InnoDB. With this addition, it became possible to figure out who is blocking whom.
MySQL 5.5 changed a lot more things inside the server. One of the new features is improved metadata locking. This solves a lot of inconsistencies and bugs that were previously possible. The output of SHOW PROCESSLIST is also changed; instead of the venerable Locked status, there are more fine-grained status indicators such as Waiting for table metadata lock.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/08/28/debugging-metadata-locking-in-mysql-5-5/"> &raquo; Continue Reading (about 400 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/08/28/mysql-kill-could-be-so-much-more-exciting/">MySQL kill could be so much more exciting</a></h1>
        <span class="post-date">Tue, Aug 28, 2012</span>
        When I kill a query or connection, whoever is running it gets a boring message about what happens. Wouldn&rsquo;t it be fun and useful to be able to specify the error message the user should see? Imagine the possibilities:
 mysql KILL 10282, "Sorry, no cigar today. Try again tomorrow."  Joking aside, relevant error messages would be great for all involved.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/08/28/mysql-kill-could-be-so-much-more-exciting/"> &raquo; Continue Reading (about 100 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/08/23/avoiding-statement-based-replication-warnings/">Avoiding statement-based replication warnings</a></h1>
        <span class="post-date">Thu, Aug 23, 2012</span>
        Although not perfect, MySQL replication was probably the killer feature that made MySQL the default database for web applications some time ago. Since then, MySQL replication has been improved greatly, with such notable changes as row-based replication. At the same time, the replication engineering team has made MySQL replication more conservative and less forgiving of foot-gun errors. These have gone a long way towards helping users avoid some of the problems that made replication sometimes drift out of sync with the master copy, sometimes silently.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/08/23/avoiding-statement-based-replication-warnings/"> &raquo; Continue Reading (about 800 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/08/22/optimizing-in-queries-against-a-compound-index/">Optimizing IN() queries against a compound index</a></h1>
        <span class="post-date">Wed, Aug 22, 2012</span>
        Unfortunately, MySQL 5.5 doesn&rsquo;t generate a very good query execution plan for IN() queries against a compound (multi-column) index, such as the following query that should be able to use the 2-column primary key:
 explain select * from tbl1 where (col1, col2) in ( (732727758,102),(732728118,102),(732728298,102),(732728478,102), (732735678,102),(962074728,102),(964153098,102),(2027956818,102), (2034233178,102),(2034233538,102))\G *************************** 1. row *************************** id: 1 select_type: SIMPLE table: tbl1 type: ALL possible_keys: NULL key: NULL key_len: NULL ref: NULL rows: 1379 Extra: Using where  Queries such as this should usually be rewritten to a form such as the following, which accesses only the 10 rows specified instead of scanning the table:
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/08/22/optimizing-in-queries-against-a-compound-index/"> &raquo; Continue Reading (about 200 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/08/21/a-summary-of-changes-in-mysql-5-6/">A summary of changes in MySQL 5.6</a></h1>
        <span class="post-date">Tue, Aug 21, 2012</span>
        I decided to take another look at MySQL 5.6, and realized that I&rsquo;ve forgotten how many changes this version will have. Each milestone has many improvements, and there have been many milestones, so my memory of the older ones grows hazy. The Fine Manual has the details, but here is my attempt at a quick (and probably incomplete and inaccurate) summary. I&rsquo;ve emphasized a few changes that will make life significantly better for me.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/08/21/a-summary-of-changes-in-mysql-5-6/"> &raquo; Continue Reading (about 900 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/08/20/a-lightweight-mysql-sandbox-script/">A lightweight MySQL sandbox script</a></h1>
        <span class="post-date">Mon, Aug 20, 2012</span>
        For a long time I&rsquo;ve been maintaining a set of scripts inspired by Giuseppe Maxia&rsquo;s MySQL Sandbox, which is a Swiss Army Knife for starting and stopping server instances for jobs such as testing, development, trying out a new version, and so on. My scripts are unpublished, until now. I&rsquo;ve just kept them in my Dropbox&rsquo;s bin folder, which I add to my $PATH.
It&rsquo;s not worth explaining why I use my own scripts, except for saying that I keep dozens or even more MySQL versions unpacked in my home directory at any given time, and I find it a little easier to use these lightweight scripts than the more fully-featured MySQL Sandbox tools.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/08/20/a-lightweight-mysql-sandbox-script/"> &raquo; Continue Reading (about 800 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/08/20/why-wont-mysql-use-the-best-index-in-a-join/">Why won&#39;t MySQL use the best index in a join?</a></h1>
        <span class="post-date">Mon, Aug 20, 2012</span>
        Someone recently asked me why the wrong index was being used for a JOIN, making the query run very slowly. We ran EXPLAIN and saw this abridged output:
 explain select [columns] from m left join u on m.intcol = u.intcol and m.url = u.url where u.url is null\G *************************** 1. row *************************** select_type: SIMPLE table: m type: ALL rows: 2717 *************************** 2. row *************************** select_type: SIMPLE table: u type: ref key: idx_intcol key_len: 2 ref: m.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/08/20/why-wont-mysql-use-the-best-index-in-a-join/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/08/15/how-to-export-your-previous-recipients-addresses-from-mac-mail/">How to export your Previous Recipients addresses from Mac Mail</a></h1>
        <span class="post-date">Wed, Aug 15, 2012</span>
        Mail&rsquo;s Mail.app keeps a list of recent recipients, but it doesn&rsquo;t let you export them to a file. You could do as some others on the Internet have suggested and grep the file of addresses for everything that looks like an email address, or you could work with your system instead of against it!
The trick is twofold: knowing where the addresses are stored, and knowing how. They&rsquo;re stored in a file in your user directory, Library/Application Support/AddressBook/MailRecents-v4.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/08/15/how-to-export-your-previous-recipients-addresses-from-mac-mail/"> &raquo; Continue Reading (about 200 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/08/14/a-new-dashboard-for-innotop/">A new dashboard for innotop</a></h1>
        <span class="post-date">Tue, Aug 14, 2012</span>
        I&rsquo;m using innotop again every day, for the first time in a few years. I found that I didn&rsquo;t like the tool that the younger and less experienced version of me created. It is very flexible and has the ability to surface a lot of information about MySQL, but not all on one screen. I wanted a &ldquo;single pane of glass&rdquo; health dashboard for the servers I&rsquo;m monitoring, instead of having to look on various screens for important bits of information.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/08/14/a-new-dashboard-for-innotop/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/08/13/killing-idle-transactions-to-increase-database-uptime/">Killing idle transactions to increase database uptime</a></h1>
        <span class="post-date">Mon, Aug 13, 2012</span>
        Killing long-running idle transactions is a good way to increase the uptime of a MySQL server. This may sound strange, but open transactions will eventually bring the server down, and it is better to hurt a single application than the many that will be hurt when that happens. Long-running idle transactions are usually caused by a programmer mistake or an unexpected condition that causes an application not to be able to do its work.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/08/13/killing-idle-transactions-to-increase-database-uptime/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/07/17/free-mysql-webinar-zero-downtime-schema-changes/">Free MySQL webinar: zero-downtime schema changes</a></h1>
        <span class="post-date">Tue, Jul 17, 2012</span>
        If you haven&rsquo;t checked into pt-online-schema-change yet, now&rsquo;s a great time to sign up for my free webinar Thursday, July 19, 3-4 PM EDT. I&rsquo;ll explain and demonstrate the tool, and walk you through everything you need to decide whether it&rsquo;s right for you. If you haven&rsquo;t even heard about pt-online-schema-change yet, the short version is it lets you alter tables in MySQL with practically no downtime at all. This even works for really big tables that might take hours or days to alter &ndash; normally a blocking operation.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/07/17/free-mysql-webinar-zero-downtime-schema-changes/"> &raquo; Continue Reading (about 200 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/07/03/is-100-uptime-really-possible/">Is 100% uptime really possible?</a></h1>
        <span class="post-date">Tue, Jul 3, 2012</span>
        This post isn&rsquo;t about NuoDB, although it was prompted by the phrase &ldquo;100% uptime&rdquo; that I&rsquo;ve seen them use a few times. I want to suggest that people think slightly differently about uptime and availability.
The key to understanding uptime and thinking clearly about it, in my opinion, is to think instead about downtime. Uptime is the absence of downtime. Therefore, focus your attention on reducing downtime through a two-pronged approach.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/07/03/is-100-uptime-really-possible/"> &raquo; Continue Reading (about 500 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/06/11/things-im-looking-forward-to-in-mysql-5-6/">Things I&#39;m looking forward to in MySQL 5.6</a></h1>
        <span class="post-date">Mon, Jun 11, 2012</span>
        As a tool author, I really look forward to working with MySQL 5.6. Many of the improvements will make life significantly easier for Percona Toolkit.
One illustration of this is in figuring out what the optimizer is doing when it plans a statement, and how it intends to use indexes. Compound indexes present challenges in some situations. Many of our tools have extensive checks to try to avoid executing queries that have bad execution plans.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/06/11/things-im-looking-forward-to-in-mysql-5-6/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/05/22/have-you-tested-pt-online-schema-change/">Have you tested pt-online-schema-change?</a></h1>
        <span class="post-date">Tue, May 22, 2012</span>
        I&rsquo;ve been seeing a lot of interest in pt-online-schema-change (nonblocking MySQL schema changes), with a lively discussion on the mailing list (which I think I&rsquo;m not keeping up with&hellip;) and a couple of bug reports filed. I&rsquo;m really interested whether people have tested it rigorously to ensure that it maintains your data integrity. I have done so, and there is a set of tests for it in the codebase, but nothing replaces real-world testing.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/05/22/have-you-tested-pt-online-schema-change/"> &raquo; Continue Reading (about 100 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/05/06/how-percona-toolkit-divides-tables-into-chunks/">How Percona Toolkit divides tables into chunks</a></h1>
        <span class="post-date">Sun, May 6, 2012</span>
        The tools we&rsquo;ve redesigned in Percona Toolkit recently have moved away from a legacy technique for operating on small numbers of rows at a time, towards a more reliable and predictable method. We call the old version &ldquo;chunking&rdquo; and the new version &ldquo;nibbling.&rdquo; Many other MySQL tools I&rsquo;ve seen either operate on entire tables, or use the &ldquo;chunking&rdquo; technique and are exposed to the problems it creates. I&rsquo;ll compare the two briefly to explain the differences.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/05/06/how-percona-toolkit-divides-tables-into-chunks/"> &raquo; Continue Reading (about 800 words)</a></p>
      </div>
  
</div>


<div class="pagination">
  
    <a class="pagination-item newer" href="/categories/databases/page/5/">Newer</a>
  
  
    <a class="pagination-item older" href="/categories/databases/page/7/">Older</a>
  
</div>



      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

  _st('install','Dq2t2TnFxXxWs_y9hi1k');
</script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-101883-1', 'auto');
  ga('send', 'pageview');

</script>



  </body>
</html>

