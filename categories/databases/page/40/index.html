<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width">

  <title>
    
      Databases &middot; Baron Schwartz&#39;s Blog
    
  </title>

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  
  <meta name="og:title" content="Databases" />
  <meta name="og:type" content="article" />
  <meta name="og:image" content="https://www.xaprb.com/" />
  <meta name="og:description" content="" />
  <meta name="og:url" content="https://www.xaprb.com/categories/databases/" />
  <meta name="og:site_name" content="Baron Schwartz&#39;s Blog" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@xaprb" />

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/index.xml">

  
  <link rel="canonical" href="https://www.xaprb.com/categories/databases/">
  

  <script type="text/javascript" src='//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
</head>


  <body class="layout-reverse sidebar-overlay">

    
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
	  <p>Baron Schwartz&#39;s Blog &middot; Stay Curious!</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>
    <a class="sidebar-nav-item" href="/blog/">Posts</a>
    
        <a class="sidebar-nav-item" href="/about/">About Baron Schwartz</a>
    
        <a class="sidebar-nav-item" href="/essential-books/">Essential Books</a>
    
        <a class="sidebar-nav-item" href="/rx-toolkit/">Regex Toolkit</a>
    
        <a class="sidebar-nav-item" href="/blog/2013/12/18/secure-your-accounts-and-devices/">Staying Secure Online</a>
    
        <a class="sidebar-nav-item" href="/blog/2013/07/10/ultimate-notebook-and-journal-face-off/">The Ultimate Notebook</a>
    
        <a class="sidebar-nav-item" href="/blog/2015/03/07/ultimate-pen-marker-face-off/">The Ultimate Pen</a>
    
  </nav>

  <div class="sidebar-item">
	  <p>&copy; 2016 Baron Schwartz.
	  <br><a href="/index.xml">RSS Feed</a>, <a href="/about/">Contact</a>.<br>
	 <br>Powered by <a href="http://hugo.spf13.com">Hugo</a>,
	  <a href="https://www.netlify.com/">Netlify</a>,
	  <a href="https://forestry.io/">Forestry</a>,
	  <a href="https://github.com/xaprb/xaprb-src/">GitHub</a>,
	  <a href="https://disqus.com">Disqus</a>,
	  <a href="https://swiftype.com/">Swiftype</a>.
	</p>
  </div>
</div>


    
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Baron Schwartz&#39;s Blog</a>
          </h3>
        </div>
      </div>

      <div class="container content">


<div class="posts">
	
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/03/12/gnucash-to-mysql-export-script/">GnuCash to MySQL export script</a></h1>
        <span class="post-date">Sun, Mar 12, 2006</span>
        It&rsquo;s tax season, and this year I decided to export my GnuCash data into a MySQL database for analysis. This article is about that process, including source code for the export script and a couple of simple queries.
The source code is available on GitHub.
The script GnuCash is a powerful double-entry accounting system for managing personal and/or business finances. I&rsquo;ve used it since about 2002, and find it adequate for my needs.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/03/12/gnucash-to-mysql-export-script/"> &raquo; Continue Reading (about 900 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/03/11/many-to-one-problems-in-sql/">How to avoid many-to-one problems in SQL</a></h1>
        <span class="post-date">Sat, Mar 11, 2006</span>
        It&rsquo;s been a while since I&rsquo;ve posted an abstract, theoretical article on a fine point of SQL. Today I want to bring your attention to two ways in which an RDBMS can allow you to do something that has no well-defined result. These involve queries where several values are eligible, but only one is chosen &ndash; and chosen in an undefined manner. I&rsquo;ll show you the two blunders, tell you when they might occur, and explain how to avoid them.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/03/11/many-to-one-problems-in-sql/"> &raquo; Continue Reading (about 1500 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/03/08/decimal-math-in-mysql/">How to avoid imprecise DECIMAL math in MySQL</a></h1>
        <span class="post-date">Wed, Mar 8, 2006</span>
        MySQL versions 4.1 and below use imprecise math in operations with DECIMAL data, which is supposed to be precise (that&rsquo;s the whole point). There is no real solution to the problem, though there are workarounds. There is also at least one genuine bug in MySQL related to this problem. In this article I&rsquo;ll explain the problems, demonstrate them in action, and show you how to work around them.
The problem Many fractional values cannot be represented exactly as a floating-point number in computers.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/03/08/decimal-math-in-mysql/"> &raquo; Continue Reading (about 800 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/02/21/flexible-insert-and-update-in-mysql/">How to write flexible INSERT and UPDATE statements in MySQL</a></h1>
        <span class="post-date">Tue, Feb 21, 2006</span>
        MySQL provides several variations on INSERT and UPDATE to allow inserting and updating exactly the desired data. These features provide a lot of power and flexibility, making MySQL significantly more capable than it otherwise might be. In this article I&rsquo;ll give an overview of each feature, help you understand how to choose among them, and point out some things to watch out for.
Setup I am using MySQL 4.1.15 to create my examples.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/02/21/flexible-insert-and-update-in-mysql/"> &raquo; Continue Reading (about 2000 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/02/07/how-to-choose-sql-column-types/">How to choose SQL column types: a case study</a></h1>
        <span class="post-date">Tue, Feb 7, 2006</span>
        There are at least two important factors to consider when choosing a column type for a SQL database table: technical requirements and semantics. The choice can be confusing, but it is important to get it right. I&rsquo;ve seen it done both ways and it&rsquo;s sometimes hard to tell what&rsquo;s wrong &ndash; it just feels wrong. In this article I will explain how to spot these mistakes, and more importantly, how to explain the mistake clearly to others.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/02/07/how-to-choose-sql-column-types/"> &raquo; Continue Reading (about 1100 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/01/08/aspnet-profile-schema/">ASP.NET&#39;s Profile DB schema</a></h1>
        <span class="post-date">Sun, Jan 8, 2006</span>
        ASP.NET has built-in functionality to store profile information about a user. The DB table schema has several design trade-offs that make it somewhat inflexible for certain uses.
ASP.NET will write a custom class, given the properties you want, such as name and birthdate. It will also take care of hooking the plumbing up in the database (there is a little script to create the profile tables in the database). It then stores and retrieves the data on subsequent requests.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/01/08/aspnet-profile-schema/"> &raquo; Continue Reading (about 500 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2005/12/23/rowcount-and-identity/">How triggers affect ROWCOUNT and IDENTITY in SQL Server 2000</a></h1>
        <span class="post-date">Fri, Dec 23, 2005</span>
        It&rsquo;s safe to use @@ROWCOUNT in SQL Server 2000 even when there is a trigger on the base table. The trigger will not skew your results; you&rsquo;ll get what you expect. @@ROWCOUNT works correctly even when NOCOUNT is set.
To quote the documentation:
 @@ROWCOUNT
Returns the number of rows affected by the last statement.
 Couldn&rsquo;t be much simpler. Getting the last IDENTITY value is not as straightforward though. There are several options: @@IDENTITY, SCOPE_IDENTITY(), and IDENT_CURRENT().
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2005/12/23/rowcount-and-identity/"> &raquo; Continue Reading (about 200 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2005/12/15/more-ways-to-use-udfs-instead-of-openxml/">More alternatives to openxml</a></h1>
        <span class="post-date">Thu, Dec 15, 2005</span>
        Following up on my earlier post, here are some alternate usage scenarios for the UDF I wrote to avoid openxml in SQL Server 2000.
The most obvious variation is to create different versions to return various data types, such as INTEGER or DATETIME or whatnot. I started to do this, but then realized it&rsquo;s silly. If I duplicate the code for every datatype, what have I accomplished besides duplicating code? The input is VARCHAR, so it&rsquo;s getting implicitly converted at some point no matter what.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2005/12/15/more-ways-to-use-udfs-instead-of-openxml/"> &raquo; Continue Reading (about 500 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2005/12/11/optional-parameters-in-the-where-clause/">How to simulate optional parameters in SQL</a></h1>
        <span class="post-date">Sun, Dec 11, 2005</span>
        This article explains how to write WHERE clauses that accept optional parameters, reducing the need for separate queries. I have seen a lot of SQL code where the SELECT is duplicated many times, but the WHERE clause is different in each one, and only one will execute. It&rsquo;s easy to factor out the differences in the WHERE clause. For example, consider the following code, assuming two optional parameters to the query:
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2005/12/11/optional-parameters-in-the-where-clause/"> &raquo; Continue Reading (about 600 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2005/12/08/sp_showdoc/">How to use extended properties as documentation with sp_showdoc</a></h1>
        <span class="post-date">Thu, Dec 8, 2005</span>
        My current employer has created a policy for documenting database tables. When tables are created or modified, we are required to add extended properties to the tables and columns. SQL Server 2000&#8242;s extended properties are name/value pairs, which can be attached to most objects. There are a few different ways to view them:
 as the &ldquo;Description&rdquo; field in the &ldquo;Design Table&rdquo; dialog in Visual Studio by right-clicking on an object in the Object Browser in Query Analyzer with system stored procedures and built-in functions such as fn_listextendedproperty  None of these is convenient or safe when browsing around the databases.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2005/12/08/sp_showdoc/"> &raquo; Continue Reading (about 900 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2005/12/07/the-integers-table/">The integers table</a></h1>
        <span class="post-date">Wed, Dec 7, 2005</span>
        For the sake of adding cross-references and my own analysis, I&rsquo;m going to replicate part of someone else&rsquo;s idea. An integers table can be used to create any desired sequence of numbers, and the idea can be extended to other data types as well. It&rsquo;s easy to use a mutex table as an integers table, so there&rsquo;s no need for two tables of the values. You can even create tables with characters, use integers with date functions to generate a range of dates, and so forth.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2005/12/07/the-integers-table/"> &raquo; Continue Reading (about 200 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2005/12/06/find-missing-numbers-in-a-sequence-with-sql/">How to find missing values in a sequence with SQL</a></h1>
        <span class="post-date">Tue, Dec 6, 2005</span>
        Sometimes it is important to know which values in a sequence are missing, either to find unused values so they can be used, or to find &ldquo;holes&rdquo; in the data. In this article I&rsquo;ll show you how to find missing values, how to find the start and end of ranges of missing values, and how to optimize the queries for best performance.
Exclusion joins Possibly the most efficient technique, depending upon the application, is to use an exclusion join against a list of all legal values (for example, an integers table).
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2005/12/06/find-missing-numbers-in-a-sequence-with-sql/"> &raquo; Continue Reading (about 1400 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2005/12/04/sql-server-2000-date-and-time-puzzler/">SQL Server 2000 date and time puzzler</a></h1>
        <span class="post-date">Sun, Dec 4, 2005</span>
        This article explains how comparing DATETIME and SMALLDATETIME values in SQL Server 2000 can introduce subtle bugs. I recently ran into a puzzling situation, which seemed like a bug in SQL Server 2000, but was in fact my fault. Even my sharpest colleagues were stumped. In fact, it turned out to be a fairly simple mistake.
The symptom was rows missing from a result. The problem was implicit data type casts.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2005/12/04/sql-server-2000-date-and-time-puzzler/"> &raquo; Continue Reading (about 500 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2005/11/30/quickly-compile-query-statistics-from-sql-query-analyzer/">How to analyze statistics from SQL Query Analyzer</a></h1>
        <span class="post-date">Wed, Nov 30, 2005</span>
        Microsoft SQL Query Analyzer prints out statistics as text, and it can be tough to wade through it all. Here is an awk script for quickly analyzing those statistics.
Analyzing the stats First, remember you can use SQL Server Profiler to measure your query&rsquo;s performance. Profiler is a very powerful tool, and everyone writing queries should be familiar with it.
For one-off queries, though, it may be faster to simply turn on the desired statistics and run the query, then grab the output and analyze it directly.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2005/11/30/quickly-compile-query-statistics-from-sql-query-analyzer/"> &raquo; Continue Reading (about 400 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2005/11/23/be-consistent-with-raiserror-severitites/">RAISERROR severity levels demystified</a></h1>
        <span class="post-date">Wed, Nov 23, 2005</span>
        RAISERROR&rsquo;s severity levels are defined in the Sql Server Books On Line, and give vague guidance about which severity level is best. The short and sweet is as follows:
 below 11 are warnings, not errors 11-16 are available for use above 16 are system errors there is no behavioral difference among 11-16  The best thing to do is just get everyone to use the same value and reduce confusion.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2005/11/23/be-consistent-with-raiserror-severitites/"> &raquo; Continue Reading (about 200 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2005/11/15/a-bug-in-microsoft-sql-servers-replace-function/">A bug in Microsoft SQL Server&#39;s replace() function</a></h1>
        <span class="post-date">Tue, Nov 15, 2005</span>
        I have found a bug in Microsoft SQL Server&rsquo;s replace() function. The function treats char and varchar differently, and replacements will fail in some cases. Here is a demonstration of the bug:
declare @string varchar(40), @find char(2), @replace char(1) set @string = 'two spaces' set @find = ' ' set @replace = ' ' if replace(@string, @find, @replace) = 'two spaces' print 'Replacement worked' else print 'Replacement failed' Result: &ldquo;Replacement failed.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2005/11/15/a-bug-in-microsoft-sql-servers-replace-function/"> &raquo; Continue Reading (about 200 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2005/11/15/use-microsoft-sql-servers-openxml-sparingly/">Efficient alternatives to Microsoft SQL Server&#39;s openxml</a></h1>
        <span class="post-date">Tue, Nov 15, 2005</span>
        Microsoft SQL Server&rsquo;s openxml function is highly CPU-intensive. This article demonstrates more efficient alternatives to openxml.
Why people use openxml A common usage for openxml is to use XML to pass a &ldquo;list&rdquo; or &ldquo;table&rdquo; of values into a stored procedure. Here is a scenario I&rsquo;ve seen a lot at my current job:
 An ASP accepts a string as input, such as &ldquo;ipod car adapter&rdquo; The ASP parses the input into space-separated values, then concatenates them together into XML The ASP passes the XML to a stored procedure The sproc uses openxml to populate a temporary table from the XML The sproc does some work (such as searching a product catalog)  This is fine, except openxml can cause a huge CPU spike, which is bad news in a Web-facing search server during holiday shopping season.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2005/11/15/use-microsoft-sql-servers-openxml-sparingly/"> &raquo; Continue Reading (about 1000 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2005/10/03/understanding-sql-joins/">How to understand SQL joins</a></h1>
        <span class="post-date">Mon, Oct 3, 2005</span>
        I have noticed many people do not understand SQL joins, even after somewhat successfully using them for a time. Joins are key to understanding SQL. This article explains what joins really are and what they really do.
Many programmers learn SQL by writing it. I learned it by studying relational algebra under the tutelage of a theoretically-minded specialist in real-time databases. I never spoke of tables and columns; I thought in sigmas and other funny letters, and I spoke of tuples and relations.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2005/10/03/understanding-sql-joins/"> &raquo; Continue Reading (about 700 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2005/09/28/grouping-data-with-catch-all-ranks/">How to group data in SQL with a catch-all bucket</a></h1>
        <span class="post-date">Wed, Sep 28, 2005</span>
        In this article I&rsquo;ll show you how to group data into defined buckets, putting everything that doesn&rsquo;t fit into the defined buckets into a catch-all bucket.
For example, suppose my data is online ads, and I store each ad&rsquo;s current position in an integer column. The ads compete against ads from other advertisers, and the top bidder gets position 1. I want to count how many ads are in positions 1 through 5, with 6 through infinity lumped together.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2005/09/28/grouping-data-with-catch-all-ranks/"> &raquo; Continue Reading (about 600 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2005/09/28/simulating-the-group-concat-function/">How to simulate the GROUP_CONCAT function</a></h1>
        <span class="post-date">Wed, Sep 28, 2005</span>
        MySQL 4.1 adds a number of new aggregate functions, among them GROUP_CONCAT. Earlier versions require you to build and compile the function as a C++ extension, which I&rsquo;m told is easy. However, that is usually not possible in a shared hosting environment.
It is possible to use user variables to write some queries without GROUP_CONCAT. The key is to understand how MySQL implements selects. As the following example shows, it really loops through each row one at a time, evaluating the expression for each.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2005/09/28/simulating-the-group-concat-function/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
</div>


<div class="pagination">
  
    <a class="pagination-item newer" href="/categories/databases/page/39/">Newer</a>
  
  
    <a class="pagination-item older" href="/categories/databases/page/41/">Older</a>
  
</div>



      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

  _st('install','Dq2t2TnFxXxWs_y9hi1k');
</script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-101883-1', 'auto');
  ga('send', 'pageview');

</script>



  </body>
</html>

