<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width">

  <title>
    
      Databases &middot; Baron Schwartz&#39;s Blog
    
  </title>

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  
  <meta name="og:title" content="Databases" />
  <meta name="og:type" content="article" />
  <meta name="og:image" content="https://www.xaprb.com/" />
  <meta name="og:description" content="" />
  <meta name="og:url" content="https://www.xaprb.com/categories/databases/" />
  <meta name="og:site_name" content="Baron Schwartz&#39;s Blog" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@xaprb" />

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/index.xml">

  
  <link rel="canonical" href="https://www.xaprb.com/categories/databases/">
  

  <script type="text/javascript" src='//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
</head>


  <body class="layout-reverse sidebar-overlay">

    
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
	  <p>Baron Schwartz&#39;s Blog &middot; Stay Curious!</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>
    <a class="sidebar-nav-item" href="/blog/">Posts</a>
    
        <a class="sidebar-nav-item" href="/about/">About Baron Schwartz</a>
    
        <a class="sidebar-nav-item" href="/essential-books/">Essential Books</a>
    
        <a class="sidebar-nav-item" href="/rx-toolkit/">Regex Toolkit</a>
    
        <a class="sidebar-nav-item" href="/blog/2013/12/18/secure-your-accounts-and-devices/">Staying Secure Online</a>
    
        <a class="sidebar-nav-item" href="/blog/2013/07/10/ultimate-notebook-and-journal-face-off/">The Ultimate Notebook</a>
    
        <a class="sidebar-nav-item" href="/blog/2015/03/07/ultimate-pen-marker-face-off/">The Ultimate Pen</a>
    
  </nav>

  <div class="sidebar-item">
	  <p>&copy; 2016 Baron Schwartz.
	  <br><a href="/index.xml">RSS Feed</a>, <a href="/about/">Contact</a>.<br>
	 <br>Powered by <a href="http://hugo.spf13.com">Hugo</a>,
	  <a href="https://www.netlify.com/">Netlify</a>,
	  <a href="https://forestry.io/">Forestry</a>,
	  <a href="https://github.com/xaprb/xaprb-src/">GitHub</a>,
	  <a href="https://disqus.com">Disqus</a>,
	  <a href="https://swiftype.com/">Swiftype</a>.
	</p>
  </div>
</div>


    
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Baron Schwartz&#39;s Blog</a>
          </h3>
        </div>
      </div>

      <div class="container content">


<div class="posts">
	
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/06/10/how-to-find-data-distributions-with-sql/">How to find data distributions with SQL</a></h1>
        <span class="post-date">Sat, Jun 10, 2006</span>
        In an earlier article I wrote about grouping data into ranks with a catch-all bucket. In this article I&rsquo;ll show you how to group the data into variable-sized buckets any way you please.
This query came up when a business partner asked me to send over the distribution of some hierarchical data. It&rsquo;s the same category/subcategory/item data as in my article about optimizing joins and subqueries. The partner wanted to know, broadly speaking, &ldquo;how many subcategories have very small and very large numbers of items&rdquo;.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/06/10/how-to-find-data-distributions-with-sql/"> &raquo; Continue Reading (about 400 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/06/04/how-to-use-meta-data-to-sort-itself/">How to use meta-data to sort itself</a></h1>
        <span class="post-date">Sun, Jun 4, 2006</span>
        I&rsquo;m a big fan of meta-data stored in the database. I love having a table that records arbitrary data about data. In fact, such a table can even be used to store meta-data about itself. In this article I&rsquo;ll explain how to use meta-data to define a sort order for both itself and the data to which it&rsquo;s related.
I&rsquo;ve mentioned an online cemetery database several times. One of the great things about this project is it doesn&rsquo;t need custom-designed interfaces for every view on the data; the interfaces can be automatically generated.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/06/04/how-to-use-meta-data-to-sort-itself/"> &raquo; Continue Reading (about 600 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/05/31/how-to-escalate-privileges-in-mysql/">How to escalate privileges in MySQL</a></h1>
        <span class="post-date">Wed, May 31, 2006</span>
        In MySQL, privileges are stored in tables in the mysql database, so if I have UPDATE privileges to that database, it&rsquo;s easy to update my own privileges. For an example of what the desired privileges should be, run the following query:
select * from user where User='root'; The Grant_priv column is what I&rsquo;m interested in. I just update that value to &lsquo;Y&rsquo; for my user, execute FLUSH PRIVILEGES, log out, and log back in.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/05/31/how-to-escalate-privileges-in-mysql/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/05/26/how-to-write-full-outer-join-in-mysql/">How to simulate FULL OUTER JOIN in MySQL</a></h1>
        <span class="post-date">Fri, May 26, 2006</span>
        In this article I&rsquo;ll show several ways to emulate a FULL OUTER join on a RDBMS that doesn&rsquo;t support it, as is the case with even the most recent versions of MySQL. This useful query is surprisingly tricky to get right.
Introduction A standard SQL FULL OUTER join is like a LEFT or RIGHT join, except that it includes all rows from both tables, matching them where possible and filling in with NULLs where there is no match.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/05/26/how-to-write-full-outer-join-in-mysql/"> &raquo; Continue Reading (about 1600 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/05/18/why-null-never-compares-false-to-anything-in-sql/">Why NULL never compares false to anything in SQL</a></h1>
        <span class="post-date">Thu, May 18, 2006</span>
        One of the most common questions SQL beginners have is why NULL values &ldquo;don&rsquo;t work right&rdquo; in WHERE clauses. In this article I&rsquo;ll explain it in a way I hope will make sense and be easy to remember.
If you&rsquo;re new to SQL and have a hard time understanding this article, I encourage you to keep puzzling over it until the light comes on. I had to do that myself (and I&rsquo;ve had to think hard about it to write this article), and I&rsquo;ve seen a number of people learn SQL.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/05/18/why-null-never-compares-false-to-anything-in-sql/"> &raquo; Continue Reading (about 1300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/05/12/why-multi-table-cross-database-deletes-fail-in-mysql/">Why multi-table cross-database deletes fail in MySQL</a></h1>
        <span class="post-date">Fri, May 12, 2006</span>
        Sometimes multi-table deletes fail in MySQL with a message about an unknown table. In this article I&rsquo;ll explain the exact combination of circumstances that cause it to happen.
First, the symptoms:
delete a from db1.t1 as a inner join db1.t2 as b on a.c1 = b.c1; ERROR 1109: Unknown table 'b' in MULTI DELETE This will happen if the following are true:
 No database is selected or one of the tables is not in the current database The tables are aliased  According the the MySQL documentation,
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/05/12/why-multi-table-cross-database-deletes-fail-in-mysql/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/05/10/when-to-avoid-and-when-to-use-surrogate-keys-in-innodb-tables/">When to use surrogate keys in InnoDB tables</a></h1>
        <span class="post-date">Wed, May 10, 2006</span>
        InnoDB is a special case among MySQL storage engines because they have clustered indexes, which means surrogate keys have to be treated differently in InnoDB. This article gives a quick overview of clustered indexes, and explains why they make it even more important to do careful analysis before making decisions about surrogate keys on InnoDB tables.
Overview of clustered indexes in MySQL A clustered index is just like any other index, except the index holds the data itself, in index order.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/05/10/when-to-avoid-and-when-to-use-surrogate-keys-in-innodb-tables/"> &raquo; Continue Reading (about 700 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/05/02/how-to-write-efficient-archiving-and-purging-jobs-in-sql/">How to write efficient archiving and purging jobs in SQL</a></h1>
        <span class="post-date">Tue, May 2, 2006</span>
        Sometimes it&rsquo;s a terrible idea to do set-based operations in SQL. There are real-world constraints, especially in heavily used OLTP or large databases, that require doing things a tiny bit at a time. In this article I&rsquo;ll show you how to write a job that can purge data from a huge table without impacting critical processes, filling up the transaction log, or causing deadlocks.
I have released a tool that does a fantastic job of archiving and purging MySQL tables, as part of MySQL Toolkit.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/05/02/how-to-write-efficient-archiving-and-purging-jobs-in-sql/"> &raquo; Continue Reading (about 2800 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/04/30/how-to-optimize-subqueries-and-joins-in-mysql/">How to optimize subqueries and joins in MySQL</a></h1>
        <span class="post-date">Sun, Apr 30, 2006</span>
        I have written before about using joins instead of subqueries, especially for NOT IN queries, which can usually be rewritten as exclusion joins &ndash; sometimes with huge efficiency gains. In this article I&rsquo;ll look more closely at the performance characteristics of a few queries I&rsquo;ve optimized in MySQL 5.0.3. I&rsquo;ll also show you some tricks you can use to get MySQL to optimize queries better when you know it&rsquo;s being inefficient.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/04/30/how-to-optimize-subqueries-and-joins-in-mysql/"> &raquo; Continue Reading (about 2500 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/04/28/how-to-find-next-and-previous-records-in-sql/">How to find next and previous records in SQL</a></h1>
        <span class="post-date">Fri, Apr 28, 2006</span>
        In this article I&rsquo;ll show you how to find the &ldquo;next&rdquo; and &ldquo;previous&rdquo; records (define these terms any way you like) in a set of records. My solution uses no subqueries or unions, so it works on old versions of MySQL, and returns both the next and the previous records in a single efficient query.
Motivation I&rsquo;m working on a project right now that requires me to use MySQL 3.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/04/28/how-to-find-next-and-previous-records-in-sql/"> &raquo; Continue Reading (about 800 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/04/26/sql-coding-standards/">My personal SQL coding standards</a></h1>
        <span class="post-date">Wed, Apr 26, 2006</span>
        Coding standards are a Good Thing. Unfortunately, most organizations don&rsquo;t have much in the way of SQL coding standards, and there aren&rsquo;t many automated tools to help. As a result, I believe SQL is often less consistently written than many other languages. Here are my suggestions.
The following are only my opinions.
Indentation I use indentation as with any other programming language. I prefer to indent the beginning of each clause in a statement equally, because I consider them all equally important; in other words, I don&rsquo;t consider the ORDER BY clause somehow &ldquo;inferior to&rdquo; the WHERE clause.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/04/26/sql-coding-standards/"> &raquo; Continue Reading (about 2100 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/04/23/explicit-inserts-into-auto_increment-columns-in-mysql/">How MySQL decides to AUTO_INCREMENT a value</a></h1>
        <span class="post-date">Sun, Apr 23, 2006</span>
        It is possible to explicitly insert values into an AUTO_INCREMENT in MySQL, but sometimes these inserts cause confusing behavior. In this article I&rsquo;ll explain that behavior.
Background Suppose I have the following table:
create table number ( number int not null auto_increment primary key ) ; Now suppose I insert some values into the primary key explicitly, bypassing the AUTO_INCREMENT feature:
insert into number(number) values (-100); select * from number; +--------+ | number | +--------+ | -100 | +--------+ So far, so good.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/04/23/explicit-inserts-into-auto_increment-columns-in-mysql/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/04/20/sequences-and-surrogate-keys-in-generic-sql/">How to generate sequences and surrogate keys in generic SQL</a></h1>
        <span class="post-date">Thu, Apr 20, 2006</span>
        This article demonstrates how to &ldquo;roll your own&rdquo; surrogate keys and sequences in a platform-independent way, using standard SQL.
Surrogate keys Relational theory talks about something called a &ldquo;candidate key.&rdquo; In SQL terms, a candidate key is any combination of columns that uniquely identifies a row (SQL and the relational model aren&rsquo;t the same thing, but I&rsquo;ll put that aside for this article). The data&rsquo;s primary key is the minimal candidate key.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/04/20/sequences-and-surrogate-keys-in-generic-sql/"> &raquo; Continue Reading (about 1200 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/04/17/max-key-length-in-mysql/">How to understand key length limitations in MySQL</a></h1>
        <span class="post-date">Mon, Apr 17, 2006</span>
        Suppose I try to create a table with a primary key that&rsquo;s varchar(500), and MySQL complains the key length is longer than the maximum of 1000 bytes. 500 is less than 1000. What&rsquo;s happening? In this article I&rsquo;ll explain why I, not MySQL, am wrong. Plus, I&rsquo;ll show you a tasty (yet apparently harmless) bug in MySQL.
Here&rsquo;s a statement that will fail on my server:
create table test(c varchar(250), d varchar(250), primary key(c,d)); ERROR 1071 (42000): Specified key was too long; max key length is 1000 bytes Why does it fail?
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/04/17/max-key-length-in-mysql/"> &raquo; Continue Reading (about 400 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/04/14/bad-character-data-in-mysql/">How to find and fix invalid character data in MySQL</a></h1>
        <span class="post-date">Fri, Apr 14, 2006</span>
        Odd characters can sometimes cause problems with character data in MySQL. These characters are easy to accidentally import from a CSV file or other data source, but hard to detect because they don&rsquo;t always display correctly. In this article I&rsquo;ll tell you which characters are bad, how you can get them in your database, how to avoid getting them, how to detect them when you have them, and how to get rid of them.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/04/14/bad-character-data-in-mysql/"> &raquo; Continue Reading (about 1200 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/04/13/using-awk-to-convert-mysql-output-to-tables/">How to convert MySQL output to HTML tables</a></h1>
        <span class="post-date">Thu, Apr 13, 2006</span>
        In this article I&rsquo;ll explain how to control the output of the mysql client program and feed it to another program to transform the results as desired. I often transform output into HTML tables for these blog articles &ndash; at least, I do when I&rsquo;m not being lazy.
The mysql command-line program can accept a command and print the results directly to STDOUT. The default output behavior differs depending on where its input comes from.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/04/13/using-awk-to-convert-mysql-output-to-tables/"> &raquo; Continue Reading (about 400 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/04/11/bit-values-in-mysql/">Why you should not use BIT columns in MySQL</a></h1>
        <span class="post-date">Tue, Apr 11, 2006</span>
        MySQL implements the BIT data type differently in different versions, and the behavior is not what one might expect. In this article I&rsquo;ll explain how MySQL&rsquo;s behavior has changed over time, what strange things can happen as a result, and how to understand and work around display issues. I&rsquo;ll tell you about a serious bug I&rsquo;ve found, and discuss differences in the BIT data type between MySQL and Microsoft SQL Server.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/04/11/bit-values-in-mysql/"> &raquo; Continue Reading (about 1400 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/04/07/foreign-key-cascades-in-mysql/">How to use foreign key cascades in MySQL</a></h1>
        <span class="post-date">Fri, Apr 7, 2006</span>
        A friend of mine recently asked me to show him how to enable cascading deletes between tables in MySQL. Cascading updates and deletes can be turned on between tables related with foreign keys in many RDBMSs. Though they can be convenient for some purposes, they can have unexpected side effects, and can be very confusing and dangerous at times. In this article I&rsquo;ll discuss some of the ways cascades can do invisible things, and show you one place they can be very handy too.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/04/07/foreign-key-cascades-in-mysql/"> &raquo; Continue Reading (about 700 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/03/26/temporary-table-subtleties-in-mysql/">Temporary table subtleties in MySQL</a></h1>
        <span class="post-date">Sun, Mar 26, 2006</span>
        Temporary tables behave very differently across various database servers. If you&rsquo;re not familiar with MySQL, some things might catch you off guard. In this article I explain some subtleties of temporary tables in MySQL and explain when you might encounter problems with them. I also show you how the platform-specific features can sometimes be very useful indeed.
Creating temporary tables In MySQL, creating a temporary table has exactly the same syntax as creating a regular table, with a few restrictions (no foreign keys, for example).
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/03/26/temporary-table-subtleties-in-mysql/"> &raquo; Continue Reading (about 900 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2006/03/22/find-contiguous-ranges-with-sql/">How to find contiguous ranges with SQL</a></h1>
        <span class="post-date">Wed, Mar 22, 2006</span>
        In an earlier article I discussed how to find missing members in a sequence with SQL. In this article I&rsquo;ll do the reverse: demonstrate how to find the start and end point of each contiguous range.
Motivation Someone posted a comment on the article linked above, asking how to do this. At least, that&rsquo;s what I think the question was; I might be misinterpreting it. I considered replying in the comments on that article, but decided it should go in its own article instead.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2006/03/22/find-contiguous-ranges-with-sql/"> &raquo; Continue Reading (about 600 words)</a></p>
      </div>
  
</div>


<div class="pagination">
  
    <a class="pagination-item newer" href="/categories/databases/page/38/">Newer</a>
  
  
    <a class="pagination-item older" href="/categories/databases/page/40/">Older</a>
  
</div>



      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

  _st('install','Dq2t2TnFxXxWs_y9hi1k');
</script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-101883-1', 'auto');
  ga('send', 'pageview');

</script>



  </body>
</html>

