<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width">

  <title>
    
      Databases &middot; Baron Schwartz&#39;s Blog
    
  </title>

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  
  <meta name="og:title" content="Databases" />
  <meta name="og:type" content="article" />
  <meta name="og:image" content="https://www.xaprb.com/" />
  <meta name="og:description" content="" />
  <meta name="og:url" content="https://www.xaprb.com/categories/databases/" />
  <meta name="og:site_name" content="Baron Schwartz&#39;s Blog" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@xaprb" />

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/index.xml">

  
  <link rel="canonical" href="https://www.xaprb.com/categories/databases/">
  

  <script type="text/javascript" src='//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
</head>


  <body class="layout-reverse sidebar-overlay">

    
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
	  <p>Baron Schwartz&#39;s Blog &middot; Stay Curious!</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>
    <a class="sidebar-nav-item" href="/blog/">Posts</a>
    
        <a class="sidebar-nav-item" href="/about/">About Baron Schwartz</a>
    
        <a class="sidebar-nav-item" href="/essential-books/">Essential Books</a>
    
        <a class="sidebar-nav-item" href="/rx-toolkit/">Regex Toolkit</a>
    
        <a class="sidebar-nav-item" href="/blog/2013/12/18/secure-your-accounts-and-devices/">Staying Secure Online</a>
    
        <a class="sidebar-nav-item" href="/blog/2013/07/10/ultimate-notebook-and-journal-face-off/">The Ultimate Notebook</a>
    
        <a class="sidebar-nav-item" href="/blog/2015/03/07/ultimate-pen-marker-face-off/">The Ultimate Pen</a>
    
  </nav>

  <div class="sidebar-item">
	  <p>&copy; 2016 Baron Schwartz.
	  <br><a href="/index.xml">RSS Feed</a>, <a href="/about/">Contact</a>.<br>
	 <br>Powered by <a href="http://hugo.spf13.com">Hugo</a>,
	  <a href="https://www.netlify.com/">Netlify</a>,
	  <a href="https://forestry.io/">Forestry</a>,
	  <a href="https://github.com/xaprb/xaprb-src/">GitHub</a>,
	  <a href="https://disqus.com">Disqus</a>,
	  <a href="https://swiftype.com/">Swiftype</a>.
	</p>
  </div>
</div>


    
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Baron Schwartz&#39;s Blog</a>
          </h3>
        </div>
      </div>

      <div class="container content">


<div class="posts">
	
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/10/29/trending-data-with-a-moving-average/">Trending data with a moving average</a></h1>
        <span class="post-date">Mon, Oct 29, 2012</span>
        In my recent talk at Surge and Percona Live about adaptive fault detection (slides), I claimed that hardcoded thresholds for alerting about error conditions are usually best to avoid in favor of dynamic or adaptive thresholds. (I actually went much further than that and said that it&rsquo;s possible to detect faults with great confidence in many systems like MySQL, without setting any thresholds at all.)
In this post I want to explain a little more about the moving averages I used for determining &ldquo;normal&rdquo; behavior in the examples I gave.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/10/29/trending-data-with-a-moving-average/"> &raquo; Continue Reading (about 600 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/10/24/why-would-anyone-use-a-32-bit-os-in-2012/">Why would anyone use a 32-bit OS in 2012?</a></h1>
        <span class="post-date">Wed, Oct 24, 2012</span>
        I&rsquo;ve been browsing some mailing lists and so on (it doesn&rsquo;t matter which ones) and came across the Great 32-Bit Debate afresh. The debate always starts with someone saying &ldquo;I need 32-bit support&rdquo; or &ldquo;this doesn&rsquo;t work on 32-bit systems,&rdquo; and someone else raising an objection to that, saying that nobody uses 32-bit systems anymore and anyone who does is doing something wrong.
Why would anyone use a 32-bit OS in the year 2012?
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/10/24/why-would-anyone-use-a-32-bit-os-in-2012/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/10/22/designing-a-database-interface-for-programmers/">Designing a database interface for programmers</a></h1>
        <span class="post-date">Mon, Oct 22, 2012</span>
        How do you connect to and converse with your database of choice (MySQL, in my case)? Chances are it&rsquo;s largely formed by the programming language you choose. I&rsquo;ve worked with a variety of programming languages. Anytime I begin learning a new one, I am reminded again that there&rsquo;s more than one way to skin a cat.
Over the last few years, I&rsquo;ve mostly programmed in Perl and shell. The shell interface to MySQL is simple: the mysql command-line tool.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/10/22/designing-a-database-interface-for-programmers/"> &raquo; Continue Reading (about 600 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/10/16/how-to-send-input-to-many-terminals/">How to send input to many terminals</a></h1>
        <span class="post-date">Tue, Oct 16, 2012</span>
        Do you ever find yourself wanting to open several terminal windows and send the same commands to all of them? I&rsquo;ve had this need many times, and I&rsquo;ve never found a completely satisfactory solution. I&rsquo;ve also known a lot of people who&rsquo;ve written various sets of scripts to help them accomplish such tasks.
In no particular order, here are a few ways I&rsquo;ve done this in the past:
 Facebook&rsquo;s pmysql client The dsh tool Several screen windows named remoteXXX, followed by a bash for-loop: while read cmd; do screen -X at remote# stuff &quot;$cmd&quot;; done Using many PuTTY windows and the puttycs tool Opening many tabs in KDE&rsquo;s Kterm tool and selecting the options to send input to all tabs  Here are some I&rsquo;ve heard about, but never used:
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/10/16/how-to-send-input-to-many-terminals/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/10/12/implementing-sql-with-unix-utilities/">Implementing SQL with Unix utilities</a></h1>
        <span class="post-date">Fri, Oct 12, 2012</span>
        As I&rsquo;ve become a better shell programmer over the last year or two, I&rsquo;ve been surprised to discover some tools I didn&rsquo;t know about. It eventually dawned on me, as I did more and more brute-force processing of large datasets, as well as some of the more delicate things that went into Aspersa -&gt; Percona Toolkit, that many tasks I used to do with SQL and spreadsheets can be accomplished easily with well-structured text files and Unix utilities.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/10/12/implementing-sql-with-unix-utilities/"> &raquo; Continue Reading (about 500 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/10/11/show-processlist-in-mysql-5-6/">SHOW PROCESSLIST in MySQL 5.6</a></h1>
        <span class="post-date">Thu, Oct 11, 2012</span>
        Mark Leith writes that it&rsquo;s time to say goodbye to SHOW PROCESSLIST in MySQL 5.6, and use the Performance Schema replacement for it instead, because the older tools cause some blocking, and the Performance Schema replacement is completely non-blocking.
On the face of it that&rsquo;s a good thing, but I wonder whether we&rsquo;ll want to keep some blocking functionality around anyway. Inspecting systems that are doing concurrent work can be hard unless you can see a variety of views on them.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/10/11/show-processlist-in-mysql-5-6/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/10/10/percona-live-cfp-closing-soon/">Percona Live CFP closing soon!</a></h1>
        <span class="post-date">Wed, Oct 10, 2012</span>
        If you haven&rsquo;t submitted your proposals for April&rsquo;s Percona Live MySQL conference (the big annual one in Santa Clara California), now&rsquo;s the time: the CFP closes in a couple of days!
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/10/10/percona-live-cfp-closing-soon/"> &raquo; Continue Reading (about 100 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/10/08/changes-to-innodb-autoextend-coming-in-mysql-5-6/">Changes to InnoDB autoextend coming in MySQL 5.6</a></h1>
        <span class="post-date">Mon, Oct 8, 2012</span>
        I was looking through James Day&rsquo;s post on upcoming changes to MySQL configuration defaults in version 5.6, and one caught my eye in particular: innodb_autoextend_increment changes from 8 to 64MB, and now affects *.ibd files.
I don&rsquo;t see any further documentation on this yet; I assume that&rsquo;s in the works. I&rsquo;m curious how this will actually behave. What will be the initial size of an empty InnoDB table using innodb_file_per_table? There might be some unintended consequences.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/10/08/changes-to-innodb-autoextend-coming-in-mysql-5-6/"> &raquo; Continue Reading (about 400 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/10/03/whats-the-benefit-of-the-cloud/">What&#39;s the benefit of the cloud?</a></h1>
        <span class="post-date">Wed, Oct 3, 2012</span>
        Given that most people don&rsquo;t know what the cloud is, I guess we shouldn&rsquo;t be surprised that most people can&rsquo;t articulate the benefits of cloud computing clearly. I commonly hear &ldquo;Scalability!&rdquo; &ldquo;Easy provisioning!&rdquo; &ldquo;Flexibility!&rdquo; and so on. Of course, all of these are benefits you can get without the cloud. Theo says it pretty well, so I won&rsquo;t belabor that point.
What do you think are the benefits of cloud computing?
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/10/03/whats-the-benefit-of-the-cloud/"> &raquo; Continue Reading (about 200 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/10/02/adaptive-fault-detection-in-mysql-servers/">Adaptive fault detection in MySQL servers</a></h1>
        <span class="post-date">Tue, Oct 2, 2012</span>
        I&rsquo;ve just finished presenting my work on adaptive fault detection at Surge and Percona Live NYC. My slides are embedded below.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/10/02/adaptive-fault-detection-in-mysql-servers/"> &raquo; Continue Reading (about 100 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/09/30/binary-log-checksums-in-mysql-5-6/">Binary log checksums in MySQL 5.6</a></h1>
        <span class="post-date">Sun, Sep 30, 2012</span>
        MySQL 5.6 will have &ldquo;checksums in the binary log,&rdquo; which can be variously described, but one phrase I&rsquo;ve heard a few times is, loosely, that it helps ensure replication integrity. This isn&rsquo;t specific enough to make it clear what it does, and when I&rsquo;ve talked about pt-table-checksum and its purpose (for example, on webinars), people often ask whether pt-table-checksum will be obsoleted by replication checksums in MySQL 5.6. The answer is no, they do completely different things.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/09/30/binary-log-checksums-in-mysql-5-6/"> &raquo; Continue Reading (about 400 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/09/22/estimating-column-cardinality-the-damn-cool-way/">Estimating column cardinality the damn cool way</a></h1>
        <span class="post-date">Sat, Sep 22, 2012</span>
        Have you seen Damn Cool Algorithms: Cardinality Estimation yet? If not, take a few minutes and read through it. Now, what if we try using that approach instead of COUNT(DISTINCT) in MySQL to see how many distinct values there are in a column?
I recently needed this information in real life, and the table is large with many duplicate values. The column is some 32-character hex string, a hash value that represents a session ID.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/09/22/estimating-column-cardinality-the-damn-cool-way/"> &raquo; Continue Reading (about 500 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/09/18/dump-and-reload-innodb-buffer-pool-in-mysql-5-6/">Dump and reload InnoDB buffer pool in MySQL 5.6</a></h1>
        <span class="post-date">Tue, Sep 18, 2012</span>
        After Gavin Towey&rsquo;s recent blog post about Percona Server&rsquo;s buffer pool dump locking the server for the duration of the operation, I thought I should re-examine MySQL 5.6&#8242;s implementation of a similar feature. When InnoDB engineers first announced the feature, I didn&rsquo;t think it was complete enough to serve a DBA&rsquo;s needs fully.
If you&rsquo;re not familiar with this topic, MySQL 5.6 will allow the DBA to save the IDs of the database pages that are in the buffer pool, and reload the pages later.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/09/18/dump-and-reload-innodb-buffer-pool-in-mysql-5-6/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/09/18/my-first-sharded-mysql-application-5-years-later/">My first sharded MySQL application, 5 years later</a></h1>
        <span class="post-date">Tue, Sep 18, 2012</span>
        High Performance MySQL has a long discussion on &ldquo;sharding,&rdquo; examining many options and their benefits and drawbacks. What does sharding look like in the real world?
Years ago I helped shard a MySQL-based application, partitioning its data across multiple database servers. It was already pretty large and significantly complex, so as usual for applications that aren&rsquo;t designed with sharding in mind from day one, a major consideration for sharding was to make the migration strategy workable and minimize the disruption to the application code.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/09/18/my-first-sharded-mysql-application-5-years-later/"> &raquo; Continue Reading (about 600 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/09/17/is-automated-failover-the-root-of-all-evil/">Is automated failover the root of all evil?</a></h1>
        <span class="post-date">Mon, Sep 17, 2012</span>
        Github&rsquo;s recent post-mortem is well worth reading. They had a series of interrelated failures that caused their MySQL servers to become unavailable. The money quote:
 The automated failover of our main production database could be described as the root cause of both of these downtime events. In each situation in which that occurred, if any member of our operations team had been asked if the failover should have been performed, the answer would have been a resounding no.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/09/17/is-automated-failover-the-root-of-all-evil/"> &raquo; Continue Reading (about 400 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/09/14/how-to-free-15gb-of-disk-space-in-a-tenth-of-a-second/">How to free 15GB of disk space in a tenth of a second</a></h1>
        <span class="post-date">Fri, Sep 14, 2012</span>
        One of the MySQL servers I help manage was encountering some problems with a full data directory. It was a bit mysterious, because we couldn&rsquo;t find any files to account for the increased usage. Here are some things we checked:
 A recursive ls -l didn&rsquo;t show any more, or larger, files than usual. Using lsof and looking at the SIZE column didn&rsquo;t either. There were not enough temporary files or tables open (as shown by lsof) to account for the disk space.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/09/14/how-to-free-15gb-of-disk-space-in-a-tenth-of-a-second/"> &raquo; Continue Reading (about 400 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/09/12/what-are-mysqls-deleted-temp-files/">What are MySQL&#39;s deleted temp files?</a></h1>
        <span class="post-date">Wed, Sep 12, 2012</span>
        If you&rsquo;ve ever looked at the lsof or listing of /proc/$pid/fd for a running MySQL server, you&rsquo;ve probably seen files like these:
# ls -l /proc/$(pidof mysqld)/fd/* | grep tmp lrwx------ 1 root root 64 Sep 12 10:21 /proc/17222/fd/18 -&gt; /var/lib/mysql/tmp/ibDOy0eD (deleted) lrwx------ 1 root root 64 Sep 12 10:21 /proc/17222/fd/323 -&gt; /var/lib/mysql/tmp/MLhfWsbz (deleted) lrwx------ 1 root root 64 Sep 12 10:21 /proc/17222/fd/6 -&gt; /var/lib/mysql/tmp/ib65H6A5 (deleted) lrwx------ 1 root root 64 Sep 12 10:21 /proc/17222/fd/7 -&gt; /var/lib/mysql/tmp/ibllu2yi (deleted) lrwx------ 1 root root 64 Sep 12 10:21 /proc/17222/fd/8 -&gt; /var/lib/mysql/tmp/ib9yRYwv (deleted) lrwx------ 1 root root 64 Sep 12 10:21 /proc/17222/fd/9 -&gt; /var/lib/mysql/tmp/ibhUCeRO (deleted)  What are those?
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/09/12/what-are-mysqls-deleted-temp-files/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/09/11/i-always-trip-on-level-ground/">I always trip on level ground</a></h1>
        <span class="post-date">Tue, Sep 11, 2012</span>
        On the lighter side: I&rsquo;ve always had trouble with mysqldump&rsquo;s expected syntax. You know, as the author of a book and all that, you might think I can get this to work. But pretty much every time I run this tool, it humiliates me. Witness:
$ mysqldump --host localhost --password secr3t --all-databases Usage: mysqldump [OPTIONS] database [tables] OR mysqldump [OPTIONS] --databases [OPTIONS] DB1 [DB2 DB3...] OR mysqldump [OPTIONS] --all-databases [OPTIONS] For more options, use mysqldump --help  Alas.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/09/11/i-always-trip-on-level-ground/"> &raquo; Continue Reading (about 100 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/09/07/announcing-innotop-1-9-0/">Announcing innotop 1.9.0</a></h1>
        <span class="post-date">Fri, Sep 7, 2012</span>
        I&rsquo;ve just released innotop version 1.9.0. This version fixes a lot of bugs, makes the tool work better when monitoring dozens of MySQL servers, and adds two new modes: a Health Dashboard and an InnoDB Blockers/Blocked mode.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/09/07/announcing-innotop-1-9-0/"> &raquo; Continue Reading (about 100 words)</a></p>
      </div>
  
      <div class="post">
        <h1 class="post-title"><a href="https://www.xaprb.com/blog/2012/09/07/measuring-free-space-in-innodbs-global-tablespace/">Measuring free space in InnoDB&#39;s global tablespace</a></h1>
        <span class="post-date">Fri, Sep 7, 2012</span>
        With innodb_file_per_table=1, InnoDB places every table&rsquo;s data and indexes in a separate .ibd file, but there is still a &ldquo;global&rdquo; system tablespace, stored by default in a file named ibdata1. This contains some of each table&rsquo;s data, such as the undo log and insert buffer. If it is fixed-size, you can fill it up and crash the server, as I&rsquo;ve mentioned in a few recent blog posts.
In older versions of MySQL, the SHOW TABLE STATUS command showed the amount of space free in the tablespace as an entry in the Comment column.
		  <p style="text-align:right"><a href="https://www.xaprb.com/blog/2012/09/07/measuring-free-space-in-innodbs-global-tablespace/"> &raquo; Continue Reading (about 300 words)</a></p>
      </div>
  
</div>


<div class="pagination">
  
    <a class="pagination-item newer" href="/categories/databases/page/4/">Newer</a>
  
  
    <a class="pagination-item older" href="/categories/databases/page/6/">Older</a>
  
</div>



      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

  _st('install','Dq2t2TnFxXxWs_y9hi1k');
</script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-101883-1', 'auto');
  ga('send', 'pageview');

</script>



  </body>
</html>

