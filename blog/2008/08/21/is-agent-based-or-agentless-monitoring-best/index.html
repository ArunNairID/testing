<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width">

  <title>
    
      Is agent-based or agentless monitoring best? &middot; Baron Schwartz&#39;s Blog
    
  </title>

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  
  <meta name="og:title" content="Is agent-based or agentless monitoring best?" />
  <meta name="og:type" content="article" />
  <meta name="og:image" content="https://www.xaprb.com/" />
  <meta name="og:description" content="" />
  <meta name="og:url" content="https://www.xaprb.com/blog/2008/08/21/is-agent-based-or-agentless-monitoring-best/" />
  <meta name="og:site_name" content="Baron Schwartz&#39;s Blog" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@xaprb" />

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/index.xml">

  
  <link rel="canonical" href="https://www.xaprb.com/blog/2008/08/21/is-agent-based-or-agentless-monitoring-best/">
  

  <script type="text/javascript" src='//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
</head>


  <body class="layout-reverse sidebar-overlay">

    
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
	  <p>Baron Schwartz&#39;s Blog &middot; Stay Curious!</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>
    <a class="sidebar-nav-item" href="/blog/">Posts</a>
    
        <a class="sidebar-nav-item" href="/about/">About Baron Schwartz</a>
    
        <a class="sidebar-nav-item" href="/essential-books/">Essential Books</a>
    
        <a class="sidebar-nav-item" href="/rx-toolkit/">Regex Toolkit</a>
    
        <a class="sidebar-nav-item" href="/blog/2013/12/18/secure-your-accounts-and-devices/">Staying Secure Online</a>
    
        <a class="sidebar-nav-item" href="/blog/2013/07/10/ultimate-notebook-and-journal-face-off/">The Ultimate Notebook</a>
    
        <a class="sidebar-nav-item" href="/blog/2015/03/07/ultimate-pen-marker-face-off/">The Ultimate Pen</a>
    
  </nav>

  <div class="sidebar-item">
	  <p>&copy; 2016 Baron Schwartz.
	  <br><a href="/index.xml">RSS Feed</a>, <a href="/about/">Contact</a>.<br>
	 <br>Powered by <a href="http://hugo.spf13.com">Hugo</a>,
	  <a href="https://www.netlify.com/">Netlify</a>,
	  <a href="https://forestry.io/">Forestry</a>,
	  <a href="https://github.com/xaprb/xaprb-src/">GitHub</a>,
	  <a href="https://disqus.com">Disqus</a>,
	  <a href="https://swiftype.com/">Swiftype</a>.
	</p>
  </div>
</div>


    
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Baron Schwartz&#39;s Blog</a>
          </h3>
        </div>
      </div>

      <div class="container content">


<div class="post">
  <h1 class="post-title">Is agent-based or agentless monitoring best?</h1>
  <span class="post-date">Thu, Aug 21, 2008 in
		
		<a href="/categories/monitoring" class="btn btn-primary">Monitoring</a>
		
		<a href="/categories/operations" class="btn btn-primary">Operations</a>
		
		<span class="share-buttons">
	<a href="https://twitter.com/intent/tweet?source=https%3a%2f%2fwww.xaprb.com%2fblog%2f2008%2f08%2f21%2fis-agent-based-or-agentless-monitoring-best%2f&text=Is%20agent-based%20or%20agentless%20monitoring%20best%3f:https%3a%2f%2fwww.xaprb.com%2fblog%2f2008%2f08%2f21%2fis-agent-based-or-agentless-monitoring-best%2f" target="_blank" title="Tweet"><i class="fa fa-twitter-square fa-lg"></i></a>
	<a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.xaprb.com%2fblog%2f2008%2f08%2f21%2fis-agent-based-or-agentless-monitoring-best%2f&title=Is%20agent-based%20or%20agentless%20monitoring%20best%3f&summary=Is%20agent-based%20or%20agentless%20monitoring%20best%3f&source=https%3a%2f%2fwww.xaprb.com%2fblog%2f2008%2f08%2f21%2fis-agent-based-or-agentless-monitoring-best%2f" target="_blank" title="Share on LinkedIn"><i class="fa fa-linkedin-square fa-lg"></i></a>
	<a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.xaprb.com%2fblog%2f2008%2f08%2f21%2fis-agent-based-or-agentless-monitoring-best%2f&t=Is%20agent-based%20or%20agentless%20monitoring%20best%3f" target="_blank" title="Share on Facebook"><i class="fa fa-facebook-square fa-lg"></i></a>
	<a href="https://plus.google.com/share?url=https%3a%2f%2fwww.xaprb.com%2fblog%2f2008%2f08%2f21%2fis-agent-based-or-agentless-monitoring-best%2f" target="_blank" title="Share on Google+"><i class="fa fa-google-plus-square fa-lg"></i></a>
</span>

  </span>
  <p>Rob Young has posted a few blog entries lately on the MySQL Enterprise monitoring software. His latest post claims that agent-based monitoring is equivalent to extensibility (<a href="http://theopenproductmanager.blogspot.com/2008/08/mysql-enterprise-monitor-agent.html">MySQL Enterprise Monitor: Agent = Extensibility</a>).</p>

<blockquote>
<p>Note: <a href="https://vividcortex.com/">VividCortex</a> is the startup I founded in 2012. It&rsquo;s the easiest way to monitor what
your servers are doing in production. VividCortex offers <a href="https://vividcortex.com/monitoring/mysql/">MySQL performance
monitoring</a> and <a href="https://vividcortex.com/monitoring/postgres/">PostgreSQL
performance management</a> among many
other features.</p>
</blockquote>

<p>I think this is conflating two completely distinct properties of a monitoring solution. <a href="http://www.cacti.net/">Cacti</a> is extremely extensible, with a plugin-based architecture and templates and all kinds of other goodies; yet it is not agent-based (actually it lets you choose &ndash; now that&rsquo;s extensibility). <a href="http://code.google.com/p/innotop/">innotop</a> is not agent-based, and it&rsquo;s extremely extensible too. Basically everything inside innotop is a lookup table of anonymous subroutines and data structures that you can tweak pretty much infinitely with plugins and configuration files that get merged into the running code dynamically. Extensibility is completely orthogonal to whether the architecture is agent-based. What about WordPress? It&rsquo;s ridiculously extensible and it has nothing to do with agents.</p>

<p>So now that we&rsquo;ve clarified that, what can we say about agent-based or agentless architectures? Which is better?</p>

<p></p>

<p>It depends. What do you want to do? How big is your system? How close to real-time do you need? What other properties do you need?</p>

<h3 id="scaling-need-precision">Scaling? Need precision?</h3>

<p>One claim might be that agent-based software scales better because it reduces the number of network connections. You have all these agents running independently on each monitored system; they collect the data they need to and that relieves the central system of doing it. Now, the theory goes, there are fewer connections between the central system and the monitored systems. Except that this completely misses the point: the agents have to connect to the central system to report their results (or be connected to and queried for results) &ndash; you don&rsquo;t save any connections this way. So that&rsquo;s not a valid argument.</p>

<p><strong>Note:</strong> I do realize that some of the viewpoints I mention are absurd. I&rsquo;m mentioning them because I&rsquo;ve heard people earnestly say them as though they could be true. So hold the flame-throwers for just a bit&hellip;</p>

<p>Next we might point out the time-sensitive nature of monitoring. If you&rsquo;re going to collect stats every minute, you may want them done exactly on the minute. A non-agent-based monitoring system may have to reach out to these remote systems and query for results, then wait; you could easily see each one-minute cycle beginning to take more than a minute with many systems! In fact, this is a problem with Cacti. Monitor too many systems (or monitor them in a silly way) and you can get overlapping executions. But this isn&rsquo;t really about agent-based or agentless either, is it? It&rsquo;s just about multi-threading, or the lack thereof. Systems that poll in sequence will always suffer from this problem. Doing it asynchronously is much smarter.</p>

<p>Here I want to be careful to point out that if you need to measure each system exactly on the minute, even asynchronous polling won&rsquo;t save you. Get enough multi-threading going, and you can run into problems with too many threads, too. So there&rsquo;s something to be said for agent-based monitoring if you have a lot of systems.</p>

<p>This also feels like a good time to mention that the <a href="http://code.google.com/p/mysql-cacti-templates/">MySQL Cacti templates</a> I wrote will make your Cacti monitoring a lot more efficient &ndash; they get all their info in one go, so they don&rsquo;t make many silly repeated calls to the MySQL server. (This is accomplished via some caching code that works around Cacti&rsquo;s limitations.) And lest we forget, this type of monitoring generally does not need to be real-time or even close to it. Some of what the MySQL Enterprise Monitor can do <em>does</em> need to be precisely timed; but Cacti monitoring does not.</p>

<p>So if you need precise time-sensitive monitoring on a lot of systems, you might want to think seriously about agent-based monitoring. (By &ldquo;a lot&rdquo; I probably mean on the order of hundreds of servers.) However &ndash; all that data still has to come back to your central monitoring system somehow, so there&rsquo;s no silver bullet; as long as you have a centralized monitoring system <strong>you will have scaling limitations</strong>. The only way around this is to decentralize, and I don&rsquo;t know of a system capable of doing that today. I&rsquo;m sure commenters will set me straight if I&rsquo;m wrong.</p>

<h3 id="management-overhead">Management overhead</h3>

<p>On the other hand, you might also think seriously about the risks and management overhead of agent-based systems; what happens when you have 1000 servers each running an agent, consuming 1000 times however much memory and other resources, and opening 1000 security holes simultaneously when a flaw is found? What if the central system dies &ndash; is your agent-based system smart enough that the agents don&rsquo;t all have to be reconfigured to talk to its replacement? Have you ever run a large-scale agent-based system of any type? What about a large-scale agentless system? These are the questions you should be weighing for yourself.</p>

<p>Personally I like polling if possible, and I want my servers to be absolutely bare-bones, especially if they are exposed to the Internet. For example, I don&rsquo;t permit anything such as SNMP to be running on those servers. I want SSH and nothing else. Anything that wants to talk to that system and get information from it can SSH in and execute some standard Unix commands, like <code>cat /proc/vmstat</code>, and work from there. Standard Unix user-management, and sudo, can lock down precisely what that SSH user is permitted to do.</p>

<h3 id="it-s-all-marketing-anyway">It&rsquo;s all marketing anyway</h3>

<p>Going back to Rob&rsquo;s post, there are a number of other claims about the benefits of agent-based monitoring, including &ldquo;Minimal connections to the backend MySQL database&rdquo; and &ldquo;Application data sharding across replicated replicas.&rdquo; I&rsquo;m skeptical that these things can&rsquo;t be achieved without an agent running (what does that last one even mean, in the context of a monitoring app?) I think I can (and to some extent I have done this already) build systems with these properties without agents. It strikes me that MySQL has taken a lot of hard questions about why they went with an agent-based architecture, and there&rsquo;s some stiff competition from agentless systems who shall not be named &ndash; the post sounds a little defensive, if you ask me.</p>

<p>In a funny way, I think it&rsquo;s kind of because they had a product on the market before the unnamed competition; they chose an agent-based architecture; now the competition is taking potshots at them. If they&rsquo;d chosen agentless, I bet someone would have built an agent-based system, then pointed at them and snickered and put &ldquo;we&rsquo;re agent-based!&rdquo; in their marketing materials. Everybody&rsquo;s got a right to market. It&rsquo;s not as though any of these &ldquo;X method is best&rdquo; claims is objective. It&rsquo;s all a matter of convincing people that what you&rsquo;re trying to sell them has value.</p>

<h3 id="summary">Summary</h3>

<p>So what&rsquo;s my opinion?</p>

<p>For small to medium-sized installations, I like the combination of Nagios and Cacti.</p>

<p>For anything above that, I don&rsquo;t believe a truly fantastic solution exists yet.</p>

<p>What I&rsquo;ve seen of the MySQL Enterprise Monitor has not overwhelmed me, and it&rsquo;s special-purpose &ndash; if I monitor my MySQL servers with that, then I have to have something else to monitor all my other servers, like my mail server and my LDAP server and so on. If That&rsquo;s just more work for me. And yet, I can&rsquo;t presently get all the MySQL fanciness I want with these more-generic systems. So, I conclude you currently cannot have your cake and eat it too.</p>
  <hr>
  <p><em>I'm Baron Schwartz, the founder and CEO of <a href="https://vividcortex.com/">VividCortex</a>. I am the author of High
  Performance MySQL and lots of open-source software for performance analysis, monitoring, and system administration.
  I contribute to various database communities such as Oracle, PostgreSQL, Redis and MongoDB. <a href="/about/">More about me.</a></em></p>

<div class="pagination">
  
    <a class="pagination-item newer" href="/blog/2008/08/21/drizzle-stops-the-rain/">Newer</a>
  
  
    <a class="pagination-item older" href="/blog/2008/08/19/how-to-unit-test-code-that-interacts-with-a-database/">Older</a>
  
</div>


  
                          <hr>
                        <h2>Comments</h2>
                        <div id="disqus_thread"></div>
                        <script type="text/javascript">
									var disqus_config = function () {
										this.page.url = 'https:\/\/www.xaprb.com\/blog\/2008\/08\/21\/is-agent-based-or-agentless-monitoring-best\/';
									};
                            (function() {
                                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
										  dsq.src = '//xaprb.disqus.com/embed.js';
                                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                            })();
                        </script>

  
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

  _st('install','Dq2t2TnFxXxWs_y9hi1k');
</script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-101883-1', 'auto');
  ga('send', 'pageview');

</script>



  </body>
</html>

